<!doctype html>
<html lang="{{ metadata.language }}">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="google-site-verification"
      content="liPIQd-cbtNZg0CBuWMEUCyFyiU8BpZcpZvKGLCVvhk"
    />
    <meta name="description" content="{{ metadata.description }}" />
    <title>{{ title | default: metadata.title }}</title>
    <link rel="stylesheet" href="/css/style.css" />
    {% if math %}
    <link rel="stylesheet" href="/assets/katex/katex.min.css" />
    {% endif %}
  </head>

  <body
    class="{{ body_class | default: 'bg-white text-gray-800' }} flex flex-col min-h-screen"
  >
    <header
      class="bg-red-900 text-white p-4 px-4 flex items-center justify-between print:hidden"
    >
      <button id="menu-button" class="md:hidden">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"
          />
        </svg>
      </button>

      <div class="font-bold text-xl">{{ metadata.title }}</div>

      <nav class="hidden md:block">
        <ul class="flex space-x-6">
          {% for nav in metadata.navigation %}
          <li>
            <a href="{{ nav.url }}" class="hover:underline">{{ nav.text }}</a>
          </li>
          {% endfor %}
        </ul>
      </nav>
    </header>

    <nav
      id="mobile-menu"
      class="fixed top-0 left-0 w-64 h-full bg-red-900 transform -translate-x-full transition-transform duration-300 ease-in-out md:hidden print:hidden z-50"
    >
      <div class="p-4 flex justify-start">
        <button id="close-button" class="text-white text-2xl">&times;</button>
      </div>
      <ul class="flex flex-col p-4 space-y-4">
        {% for nav in metadata.navigation %}
        <li>
          <a
            href="{{ nav.url }}"
            class="hover:underline block p-2 text-white text-lg"
            >{{ nav.text }}</a
          >
        </li>
        {% endfor %}
      </ul>
    </nav>

    {{ content }} {% unless hide_footer %}
    <footer class="bg-red-900 text-white p-6 md:p-8 print:hidden mt-auto">
      <div class="container mx-auto max-w-4xl">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
          <div>
            <h2 class="font-bold text-lg mb-2">Office Address</h2>
            <p class="text-sm">
              {{ metadata.addresses.office.room }}<br />
              {{ metadata.addresses.office.unit }}<br />
              {{ metadata.addresses.office.institution }},<br />
              {{ metadata.addresses.office.location }}
            </p>
          </div>

          <div>
            <h2 class="font-bold text-lg mb-2">Contact</h2>
            <p class="text-sm">
              <a
                href="tel:{{ metadata.author.phone | remove: ' ' | remove: '+' }}"
                class="hover:underline"
                >{{ metadata.author.phone }}</a
              ><br />
              <a
                href="mailto:{{ metadata.author.email }}"
                class="hover:underline"
                >{{ metadata.author.email }}</a
              ><br />
              <a
                href="mailto:{{ metadata.author.secondary_email }}"
                class="hover:underline"
                >{{ metadata.author.secondary_email }}</a
              >
            </p>
          </div>
        </div>

        <hr class="border-red-700 mb-4" />

        <div
          class="flex flex-col md:flex-row justify-between items-center text-sm text-red-100"
        >
          <p>&copy; 2025 {{ metadata.author.name }}. All rights reserved.</p>
        </div>
      </div>
    </footer>
    {% endunless %}

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const menuButton = document.getElementById('menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const closeButton = document.getElementById('close-button');

        if (menuButton && mobileMenu && closeButton) {
          // Open the menu
          menuButton.addEventListener('click', () => {
            mobileMenu.classList.remove('-translate-x-full');
            mobileMenu.classList.add('translate-x-0');
          });

          // Close the menu
          closeButton.addEventListener('click', () => {
            mobileMenu.classList.remove('translate-x-0');
            mobileMenu.classList.add('-translate-x-full');
          });
        }
      });
    </script>
  </body>
</html>
